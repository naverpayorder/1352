var certification=(function(){var u,r,j,l,p,w,h=navigator.userAgent.toLowerCase(),d=h.match(/(\ipod|\iphone|\ipad)/)?"ios":"android",s=h.match(/crios/)?"chrome":(h.match(/naver/)?"naver":(h.match(/line/)?"line":"safari")),f,k,e,g="https://dbill.naver.com";function v(){function y(){return((1+Math.random())*65536|0).toString(16).substring(1)}return y()+"-"+y()+"-"+y()+"-"+y()+"-"+y()}function o(z){var y;r=document.createElement("form");r.id="certification";r.method="post";r.target="certificationFrame"+j;if(z.cardCompanyId==="UPOP"){r.action=g+"/certification/unionpay/request"}else{r.action=z.isMobile?g+"/certification/request-for-mobile":g+"/certification/request"}if(z){for(var A in z){if(z.hasOwnProperty(A)&&A!=="callbackFunc"&&A!=="environment"){y=document.createElement("input");y.type="hidden";y.name=A;y.value=z[A];if(z[A]===null||z[A]===""||typeof z[A]==="undefined"){alert("요청값이 올바르지 않습니다.["+A+"]");m();return false}r.appendChild(y)}}y=document.createElement("input");y.type="hidden";y.name="mobileOs";y.value=d;r.appendChild(y);y=document.createElement("input");y.type="hidden";y.name="browser";y.value=s;r.appendChild(y);document.body.appendChild(r)}return true}function m(){if(w&&d==="ios"&&k){var A=document.getElementsByClassName("_body")[0];if(A){A.style.display=""}}var y=document.getElementById("certificationFrame"+j),z=document.getElementById("certification");if(y){y.parentNode.removeChild(y)}if(z){z.parentNode.removeChild(z)}u=null;r=null}function x(z){u=document.createElement("iframe");u.id="certificationFrame"+j;u.name="certificationFrame"+j;u.width="100%";u.height="100%";u.style.zIndex="10000";u.style.left="0px";u.style.top="0px";u.style.right="0px";u.style.bottom="0px";u.style.border=0;if(!z.isMobile){u.style.position="fixed";u.allowtransparency=true}else{u.style.backgroundColor="white";if(d==="ios"&&k){u.style.position="absolute";var y=document.getElementsByClassName("_body")[0];if(y){y.style.display="none"}}else{u.style.position="fixed"}}document.body.appendChild(u)}function c(y){if(!y.cardCompanyId){alert("필수값이 없습니다.");return false}if(y.isMobile===null||y.isMobile===""||typeof y.isMobile==="undefined"){alert("필수값이 없습니다.");return false}if(!y.serviceId){alert("필수값이 없습니다.");return false}if(!y.merchantName){alert("필수값이 없습니다.");return false}if(!y.amount){alert("필수값이 없습니다.");return false}if(!y.itemName){alert("필수값이 없습니다.");return false}if(!y.installmentTerm){alert("필수값이 없습니다.");return false}if(!y.domainUri){alert("필수값이 없습니다.");return false}return true}function a(y){e=g+"/certification/log?";for(var z in y){if(y.hasOwnProperty(z)&&z!=="callbackFunc"){e=e+z+"="+encodeURIComponent(y[z])+"&"}}}function n(z){var y=new Image();y.src=e+"reservedKey="+z.reservedKey+"&result="+z.result+"&message="+encodeURIComponent(z.message||"")}function b(y){if(!window.postMessage){alert("지원하지 않는 브라우저입니다.");return}if(!c(y)){return}a(y);w=y.isMobile;j=v();p=y.callbackFunc||function(){};l=y.domainUri||"";y.interestFreeYn=y.interestFreeYn||"n";y.usePopup=y.usePopup||false;f=(document.body&&document.body.clientHeight!==0)?document.body:document.documentElement;k=f.scrollHeight>f.clientHeight;m();x(y);if(o(y)){q();r.submit()}}function q(){if(window.addEventListener){window.addEventListener("message",i)}else{window.attachEvent("onmessage",i)}}function i(z){var y=z.origin||z.originalEvent.origin;if(y.indexOf("naver.com")>-1){t(JSON.parse(z.data))}}function t(y){n(y);if(y.result==="isp"){r.useCardCertification.value=false;r.submit();return}m();p(y)}return{request:b}})();